

<ion-view view-title="Agenvida" >

  <ion-nav-bar class="bar-positive">
                    <ion-nav-buttons side="left">
                     <!-- Toggle left side menu -->
                     <button menu-toggle="left" class="button button-icon icon ion-navicon"></button>
                    </ion-nav-buttons>

                    <ion-nav-buttons side="right">
                     <!-- Toggle left side menu -->
                     <ionic-datepicker input-obj="datepickerObject"><button  class="button button-icon icon ion-calendar"></button></ionic-datepicker>
                     <button  class="button button-icon icon ion-android-person" ng-click="verPerfil()"></button>
                    </ion-nav-buttons>
         
                  </ion-nav-bar>



                        <ion-header-bar class="bar bar-subheader" align-title="center" >



                         <h2 class="title">

                          <a class="button  button-icon  icon ion-arrow-left-b" ng-click="diaDown()" ></a> 

                          <span class="fecha">{{ano}}-{{mes}}-{{dia}}</span> 
                          <a class=" button  button-icon icon ion-arrow-right-b" ng-click="diaUp()" ></a></h2>

                      </ion-header-bar>

                      <ion-content scroll="false" class="has-subheader" has-subheader="true" >

                        <ion-list ng-show="false">
                          <ion-item ng-repeat="task in activeProject.tasks">
                            {{task.title}}
                          </ion-item>
                        </ion-list>


                              <ion-list>
                                <div ng-repeat="vinculacion in vinculaciones" ng-init="sectionIndex = $index">
                                  <ion-item class="item-stable"
                                            ng-click="toggleGroup(vinculacion)"
                                            ng-class="{active: isGroupShown(vinculacion)}">
                                      <i class="icon" ng-class="isGroupShown(vinculacion) ? 'ion-minus' : 'ion-plus'"></i>
                                    &nbsp;
                                     {{vinculacion.nombre}}
                                  </ion-item>
                                  <ion-item class="item-accordion  item-icon-right"
                                            ng-repeat="proposito in filtered =(propositos | filter:{ vinculacion: vinculacion.id , mes_ano: ano + '-'+ mes +'-' , }) "
                                            ng-show="isGroupShown(vinculacion)"
                                            on-double-tap="showOpciones(proposito)" 


                                            >
                    
                                    {{proposito.proposito}} 

                                    <ion-spinner class="cargando" ng-show="loading == sectionIndex + '-' + $index"></ion-spinner>
                                    <span class="icon ion-ios-checkmark-outline mas " ng-class="{'mas-mark' : (proposito.marcaciones | filter:{ dia: dia, cumplimiento: 1 }).length != 0 } " ng-click="marcar(proposito, 1 , sectionIndex, $index)"></span>


                                    <span class="icon ion-ios-close-outline menos " ng-class="{'menos-mark' : (proposito.marcaciones | filter:{ dia: dia, cumplimiento: 2 }).length != 0 }" ng-click="marcar(proposito, 2 , sectionIndex, $index)"></span>

                                    <span class="icon ion-ios-circle-outline neutro" ng-class="{'neutro-mark' : (proposito.marcaciones | filter:{ dia: dia, cumplimiento: 0 }).length != 0 }" ng-click="marcar(proposito, 0, sectionIndex, $index )"></span>
                                   
                                  </ion-item>

                                            <label class="item item-input item-accordion" ng-show=" isGroupShown(vinculacion) && showInput[vinculacion.id]">
                                                
                                                <input type="text">
                                              </label>
                                

                                  <ion-item class="item-accordion  item-icon-right" ng-show="isGroupShown(vinculacion)" ng-click="CreateProposito(vinculacion.id)">
                                  Agregar nuevo Proposito

                                  <span class="icon ion-plus-circled"  ng-click=""></span>
                                  </ion-item>

                                  
                                </div>


                              </ion-list>
                      </ion-content>

</ion-view>